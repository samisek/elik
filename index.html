  <!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Pro El√≠ku ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.popup {
    background: white;
    padding: 25px 35px;
    border-radius: 18px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    max-width: 340px;
    z-index: 10;
}

.popup p {
    font-size: 22px;
}

button {
    padding: 16px 28px;
    font-size: 20px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background-color: #ff4d6d;
    color: white;
    margin-top: 15px;
}

#gameContainer {
    display: none;
    width: 100%;
    text-align: center;
}

#gameTitle {
    font-size: 24px;
    margin: 10px;
}

canvas {
    background: #fff;
    border-radius: 12px;
    touch-action: manipulation;
}
</style>
</head>

<body>

<!-- POPUP -->
<div class="popup" id="popup">
    <p id="text">Ahoj, El√≠ku.</p>
    <button id="mainBtn" onclick="nextStep()">Ahoj?</button>
</div>

<!-- VTIPN√ù GIF -->
<img src="eli.gif" width="200" style="margin-top:15px;" id="introGif">

<!-- HRA -->
<div id="gameContainer">
    <div id="gameTitle">Uteƒç zl√©mu k≈ôeƒçkovi!!</div>
    <canvas id="game" width="360" height="220"></canvas>
</div>

<script>
let step = 0;

function nextStep() {
    const t = document.getElementById("text");
    const b = document.getElementById("mainBtn");

    if (step === 0) {
        t.innerText = "Kdy≈æ u≈æ tu jsi, na nƒõco bych se chtƒõl zeptat‚Ä¶";
        b.innerText = "Tak se ptej?";
    } else if (step === 1) {
        t.innerText = "Byla bys‚Äì ALE NE!!";
        b.innerText = "Co se dƒõje?!";
    } else if (step === 2) {
        document.getElementById("popup").style.display = "none";
        document.getElementById("introGif").style.display = "none";
        startGame();
    }
    step++;
}

/* ===== MINI HRA ===== */

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const playerImg = new Image();
playerImg.src = "elik.jpg";

const hamsterImg = new Image();
hamsterImg.src = "hamster.gif";

const fireballImg = new Image();
fireballImg.src = "fireball.png";

let player, spike, hamster, fireballs, gravity, gameOver;

function startGame() {
    document.getElementById("gameContainer").style.display = "block";

    player = { x: 60, y: 150, w: 30, h: 30, vy: 0 };
    hamster = { x: -60, y: 80, w: 50, h: 50 };
    spike = { x: 360, y: 180, w: 20, h: 20 };
    fireballs = [];

    gravity = 0.8;
    gameOver = false;

    setInterval(shootFireball, 800);
    requestAnimationFrame(loop);
}

function shootFireball() {
    if (!gameOver) {
        fireballs.push({ x: hamster.x + 40, y: hamster.y + 20, w: 15, h: 15 });
    }
}

function loop() {
    if (gameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // player physics
    player.vy += gravity;
    player.y += player.vy;
    if (player.y > 150) {
        player.y = 150;
        player.vy = 0;
    }

    // draw player
    ctx.drawImage(playerImg, player.x, player.y, player.w, player.h);

    // hamster
    hamster.x += 0.4;
    ctx.drawImage(hamsterImg, hamster.x, hamster.y, hamster.w, hamster.h);

    // fireballs (NEZAB√çJ√ç)
    fireballs.forEach(f => {
        f.x += 5;
        ctx.drawImage(fireballImg, f.x, f.y, f.w, f.h);
    });

    // spike
    spike.x -= 4;
    if (spike.x < -20) spike.x = 360;

    ctx.fillStyle = "black";
    ctx.beginPath();
    ctx.moveTo(spike.x, spike.y);
    ctx.lineTo(spike.x + 10, spike.y - 20);
    ctx.lineTo(spike.x + 20, spike.y);
    ctx.fill();

    // collision spike
    if (
        player.x < spike.x + spike.w &&
        player.x + player.w > spike.x &&
        player.y + player.h > spike.y - 20
    ) {
        endGame();
        return;
    }

    requestAnimationFrame(loop);
}

function endGame() {
    gameOver = true;
    document.getElementById("popup").style.display = "block";
    document.getElementById("text").innerText = "Zem≈ôela jsi üòû";
    document.getElementById("mainBtn").innerText = "Je≈°tƒõ to zkus√≠m..";
    document.getElementById("mainBtn").onclick = () => location.reload();
}

// skok ‚Äì klik / tap
canvas.addEventListener("click", () => {
    if (player.vy === 0) {
        player.vy = -13;
    }
});
</script>

</body>
</html>